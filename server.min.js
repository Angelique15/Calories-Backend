const express=require("express");const cors=require("cors");const app=express();const port=process.env.PORT||3001;const corsOptions={origin:["https://angelique15.github.io","https://rad-vacherin-853b41.netlify.app"],credentials:true};app.use(cors(corsOptions));app.use(express.json());const notAllowedFoodsRoutes=require("./routes/notAllowedFoodsRoutes");app.use("/api/not-allowed-foods",notAllowedFoodsRoutes);require("./config/config-passport");const routerApi=require("./api");app.use("/api",routerApi);app.use(((_,res)=>{res.status(404).json({status:"error",code:404,message:`Use api on routes: \n  /api/signup - registration user {username, email, password}\n  /api/login - login {email, password}`,data:"Not found"})}));app.use(((err,_,res)=>{console.log(err.stack);res.status(500).json({status:"fail",code:500,message:err.message,data:"Internal Server Error"})}));app.use("/api/not-allowed-foods",((req,res,next)=>{res.header("Access-Control-Allow-Origin","https://angelique15.github.io");res.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");next()}));app.get("/api/not-allowed-foods/:bloodType",((req,res)=>{const{bloodType:bloodType}=req.params;const notAllowedFoodsData=require("./models/es-productos.json");const foodsForBloodType=notAllowedFoodsData[bloodType]||[];res.json(foodsForBloodType)}));app.listen(port,(()=>{console.log(`Servidor en ejecuci√≥n en el puerto ${port}`)}));module.exports=app;